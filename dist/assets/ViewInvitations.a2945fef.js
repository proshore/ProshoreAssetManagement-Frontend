import{v as N}from"./validateEmail.4d4a0f2a.js";import{_ as h,r as p,o as d,c,a as e,b as A,f as _,v as x,t as r,g as w,h as D,F as f,e as m,d as E,p as C,i as M,j as V,n as v}from"./index.0254a52d.js";import{A as U,B as k,a as R}from"./BaseAlert.e6c65891.js";const F=t=>{const s={isValid:!1,errorMessage:""},l=/^[a-zA-Z0-9_.-]*$/i;return t.length<3&&(s.errorMessage="Name should be at least 3 letters long",s.isValid=!1),l.test(t)||(s.errorMessage="Please enter a valid username",s.isValid=!1),{...s,isValid:!0}},$="api/users/invite",L="",Q="",S={INVITE_URL:$,RESEND_INVITE_URL:L,REVOKE_INVITE_URL:Q},T=async t=>await U.post(S.RESEND_INVITE_URL,t),Y=async t=>await U.post(S.REVOKE_INVITE_URL,t),J="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEFSURBVHgB7drBDYJAEIXhN1ZgFdqCliENaAdqBUoFSgfaAHVgC9AEFTAuEA6QPTKOJO+7uRfyJwKZCQIju6S6KXDpf+nrk2+uMCAwsE+qh0Iv41NNi3x7x8xWMNAAp+mZQM4wYBIg0PX0LPyd1jBgEvBLDPDGAG8M8MYAbwzwxgBvDPDGAG/dTDwM4LFJ6h8ppB4WBRIfwJdC01VsAF+KdlGw/JtY0GRYKm3e3U28P5TPRnAUo9XH3MIDpw4PnKxdlJls5nZJqbHzIt/Mfj2+yLwxwBsDvDHAGwO8McAbA7wxwBsDYvq9zVgYxWoYMPrUILIoCAM4DJjMxK1hUdBfpB/AYeALZMpEN6IjwuQAAAAASUVORK5CYII=",K="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAXCAYAAADgKtSgAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFPSURBVHgBpdU7TsNAEAbgGSdLE4rcAFMQCUHhFRI1OVHECQgnQDlBOAI3gJpmQ4EiQeMjuIAGWx5mbRny8D7zN5HWu98feWQbgaPUOgUxmNUAb1eXk0c4IEqpMRwdz4CxYbMiBksCuEF98f3zRF6c3UNENExi9AxEGTCWNKuERbeBiOZccAeB+YMBsm6txavqltk8tqAP5qzwf8M6JZHwBky7NUScu26RES6/p7i9MazABkspC9w/4Ffggptz/f/IXuADG3FbAfx8LXxgK24q4BM5EKQu2IkbCzxgL1znVX1kQwFqZ7lg+NQE6yTgiB4ew8ueS+07xBJ0wT3D2wYsz0ESCK+qEqTvqyIJgfXwruWEf+upTwGGwJvD83mSMQb2LcBY2KcAD4FdBe1AxeghFtaR8jzvG3L3mRvHwraCBi8r0gN4IaoXMfB+gbbw6Rd6pCuO/CF7vQAAAABJRU5ErkJggg==";const X={name:"InviteUser",data(){return{name:{value:"",error:""},email:{value:"",error:""},role:{value:""},submission:{message:"",isVerified:!1}}},components:{BaseAlert:k},methods:{formData(){return{email:this.email.value,name:this.name.value,role:this.role.value}},validateField(t){if(t==="name"){let s=F(this.name.value);this.name.error=s.errorMessage}if(t==="email"){let s=N(this.email.value);this.email.error=s.errorMessage}},async handleSubmit(){if(console.log(this.role.value),!this.name.value||!this.email.value||!this.role.value)return this.submission.message="Field must not be empty";if(this.name.error||this.email.error)return this.submission.message="Some fields are not filled properly";try{this.submission.isVerified=!0;const t=await R.post("https://ptt-backend-dev.proshore.eu/api/users/invite",this.formData())}catch(t){this.submission.message=t}}}},q=e("button",{type:"button",class:"btn invite-button button-color px-4 py-2","data-cy":"invite-btn","data-bs-toggle":"modal","data-bs-target":"#exampleModal"},[e("i",{class:"bi bi-plus-lg me-2",style:{"font-size":"1.5rem"}}),m(" Invite member ")],-1),z={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},G={class:"modal-dialog"},j={class:"modal-content"},O={class:"add-a-dialog-box screen"},P=E('<div class="title"><div class="title-left"><div class="header-frame"><img src="'+J+'" alt="" class="plus-stroke"><div class="invite-new-member">Invite new member</div></div><p class="add-a-new-member-to-proshore"> Add a new member to proshore </p></div><div class="close-button"><button class="close-rectangle" type="button" data-cy="close-invite-btn" data-bs-dismiss="modal"><img src="'+K+'" alt="" class="x-lg"></button></div></div>',1),H={class:"row w-100 d-flex justify-content-center"},W={class:"input-frame"},Z={class:"input-with-label"},ee=e("div",{class:"label"},"Full Name",-1),te=["textContent"],se={class:"input-with-label"},oe=e("div",{class:"label"},"Email",-1),ae=["textContent"],ne={class:"input-with-label"},ie=e("div",{class:"label"},"Role",-1),le=e("option",{selected:"",disabled:""},"Select a Role",-1),re=e("option",{"data-cy":"invite-select-employee",value:"employee"}," Employee ",-1),de=e("option",{"data-cy":"invite-select-vendor",value:"vendor"},"Vendor",-1),ce=[le,re,de],me={class:"button-frame"},ue=e("div",{class:"outline-button"},[e("button",{class:"primary button",type:"button","data-cy":"invite-cancel-btn","data-bs-dismiss":"modal"}," Cancel ")],-1),be={class:"invite-button"};function _e(t,s,l,g,o,a){const u=p("BaseAlert");return d(),c(f,null,[q,e("div",z,[e("div",G,[e("div",j,[e("div",O,[P,e("div",H,[A(u,{submission:o.submission},null,8,["submission"])]),e("div",W,[e("div",Z,[ee,_(e("input",{type:"text",placeholder:"Username",class:"input-text","onUpdate:modelValue":s[0]||(s[0]=n=>o.name.value=n),onKeyup:s[1]||(s[1]=n=>a.validateField("name")),"data-cy":"invite-name"},null,544),[[x,o.name.value]]),o.name.error?(d(),c("div",{key:0,class:"form-text text-danger",textContent:r(o.name.error)},null,8,te)):w("",!0)]),e("div",se,[oe,_(e("input",{type:"email",placeholder:"ex: myworkmail@gmail.com",class:"input-text","onUpdate:modelValue":s[2]||(s[2]=n=>o.email.value=n),onKeyup:s[3]||(s[3]=n=>a.validateField("email")),"data-cy":"invite-email"},null,544),[[x,o.email.value]]),o.email.error?(d(),c("div",{key:0,class:"form-text text-danger",textContent:r(o.email.error)},null,8,ae)):w("",!0)]),e("div",ne,[ie,_(e("select",{class:"input-text","aria-label":"Default select example","onUpdate:modelValue":s[4]||(s[4]=n=>o.role.value=n)},ce,512),[[D,o.role.value]])])]),e("div",me,[ue,e("div",be,[e("button",{class:"primary-1 button-1 button-color","data-cy":"invite-send-btn",onClick:s[5]||(s[5]=(...n)=>a.handleSubmit&&a.handleSubmit(...n))}," Send Invitation ")])])])])])])],64)}const I=h(X,[["render",_e]]);const ve={props:{name:{type:String,required:!0},email:{type:String,required:!0},contact:{type:String,required:!0}},methods:{bodyData(){return{token:"1bxXVTgMmdgiClqXZ8Rdmg",data:{name:this.name,email:this.email}}},async reInviteMember(){try{const t=await T(this.bodyData())}catch{}},async revokeMember(){try{const t=await Y(this.bodyData())}catch{}}}},b=t=>(C("data-v-a72763d9"),t=t(),M(),t),pe={class:"btn-group dropstart"},Ae=b(()=>e("button",{class:"btn three-dot-btn d-flex justify-content-center align-items-center","data-cy":"invitation-action-toggle-btn","data-bs-toggle":"dropdown"},[e("i",{class:"bi bi-three-dots-vertical",style:{color:"#FA6731","font-size":"1.5rem"}})],-1)),he={class:"dropdown-menu"},fe=b(()=>e("i",{class:"bi bi-send me-4",style:{color:"#CED4DA"}},null,-1)),ge=m("Resend Invitation "),ye=[fe,ge],xe=["data-bs-target"],we=b(()=>e("i",{class:"bi bi-dash-square-fill me-4",style:{color:"#FA6731"}},null,-1)),Ie=m("Revoke Member "),Be=[we,Ie],Ee=b(()=>e("li",null,[e("a",{class:"dropdown-item text-danger",href:"#","data-cy":"delete-invitation-link"},[e("i",{class:"bi bi-trash3-fill me-4",style:{color:"#FA6731"}}),m("Delete Entry ")])],-1)),Ce=["id"],Me={class:"modal-dialog modal-dialog-centered",role:"document"},Ue={class:"modal-content"},Re=b(()=>e("div",{class:"modal-header"},[e("h5",{class:"modal-title m-auto ps-5",id:"exampleModalLongTitle"},"Are you sure?"),e("button",{type:"button",class:"btn close conformation-box-close-btn second-button-color","data-bs-dismiss":"modal","data-cy":"conformation-box-close-btn","aria-label":"Close"},[e("span",{"aria-hidden":"true"},"\xD7")])],-1)),Se={class:"modal-body d-flex justify-content-center"},Ne={class:"w-75 text-center"},De=m("Do you want to revoke the invitation of "),Ve=m(" ? Once revoked it cannot be undone."),ke={class:"modal-footer d-flex justify-content-center"},Fe=b(()=>e("button",{type:"button",class:"btn conformation-box-no-btn second-button-color","data-cy":"conformation-box-no-btn","data-bs-dismiss":"modal"},"No",-1));function $e(t,s,l,g,o,a){return d(),c(f,null,[e("div",pe,[Ae,e("div",he,[e("li",null,[e("a",{class:"dropdown-item",href:"#","data-cy":"resend-invitation-link",onClick:s[0]||(s[0]=u=>a.reInviteMember({name:l.name,email:l.email}))},ye)]),e("li",null,[e("a",{class:"dropdown-item text-danger",href:"#","data-cy":"revoke-invitation-link","data-bs-toggle":"modal","data-bs-target":"#_"+l.contact},Be,8,xe)]),Ee])]),e("div",{class:"modal fade",id:"_"+l.contact,tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"},[e("div",Me,[e("div",Ue,[Re,e("div",Se,[e("p",Ne,[De,e("b",null,r(l.name),1),Ve])]),e("div",ke,[Fe,e("button",{type:"button",class:"btn conformation-box-yes-btn text-white button-color","data-cy":"conformation-box-yes-btn",onClick:s[1]||(s[1]=(...u)=>a.revokeMember&&a.revokeMember(...u)),"data-bs-dismiss":"modal"},"Yes")])])])],8,Ce)],64)}const B=h(ve,[["render",$e],["__scopeId","data-v-a72763d9"]]);const Le={components:[I,B],data(){return{invitations:[]}},components:{InvitationActions:B,InviteUser:I},async created(){try{const t=await R.get("https://6319958e8e51a64d2be7568b.mockapi.io/invitedUsers");this.invitations=t.data}catch(t){console.error(t)}},computed:{styleRole(){return t=>{if(t.toLowerCase()==="employee")return"role-employee";if(t.toLowerCase()==="vendor")return"role-vendor"}},styleStatus(){return t=>{if(t.toLowerCase()==="pending")return"status-pending";if(t.toLowerCase()==="expired")return"status-expired"}},styleDotIcon(){return t=>{if(t.toLowerCase()==="pending")return"status-pending-icon";if(t.toLowerCase()==="expired")return"status-expired-icon"}}}},Qe=t=>(C("data-v-a58fdb3a"),t=t(),M(),t),Te={class:"invitation-container p-4 mt-4 mx-4"},Ye={class:"row px-3"},Je=E('<div class="col-4" data-v-a58fdb3a><form class="form-inline d-flex" data-v-a58fdb3a><input class="form-control form-control-lg mr-sm-2" type="search" placeholder="Search" aria-label="Search" data-cy="invitations-search-field" data-v-a58fdb3a><button class="btn my-2 px-3 my-sm-0 mx-2 button-color" type="submit" data-cy="invitation-search-btn" data-v-a58fdb3a><i class="bi bi-search" data-v-a58fdb3a></i></button></form></div>',1),Ke={class:"col-8 d-flex justify-content-end"},Xe={class:"row mt-4 px-4"},qe={class:"table table-borderless border table-hover table-sm bg-white regular-font"},ze=Qe(()=>e("thead",{class:"thead-light"},[e("tr",{class:"text-center"},[e("th",{scope:"col"},"S.N"),e("th",{scope:"col"},"Member Full Name"),e("th",{scope:"col"},"Email Address"),e("th",{scope:"col"},"Contact Number"),e("th",{scope:"col"},"Role"),e("th",{scope:"col"},"Status"),e("th",{scope:"col"},"Action")])],-1)),Ge={class:"text-center"},je={scope:"row"};function Oe(t,s,l,g,o,a){const u=p("InviteUser"),n=p("InvitationActions");return d(),c("div",Te,[e("div",Ye,[Je,e("div",Ke,[A(u)])]),e("div",Xe,[e("table",qe,[ze,(d(!0),c(f,null,V(o.invitations,(i,y)=>(d(),c("tbody",{key:y},[e("tr",Ge,[e("th",je,r(y+1),1),e("td",null,r(i.name),1),e("td",null,r(i.email),1),e("td",null,r(i.contact),1),e("td",{class:v(`role ${a.styleRole(i.role)}`)},r(i.role),3),e("td",null,[e("div",{class:v(`status ${a.styleStatus(i.status)}`)},[e("div",{class:v(["status-icon me-2",` ${a.styleDotIcon(i.status)}`])},null,2),m(" "+r(i.status),1)],2)]),e("td",null,[A(n,{name:i.name,email:i.email,contact:i.contact},null,8,["name","email","contact"])])])]))),128))])])])}const Ze=h(Le,[["render",Oe],["__scopeId","data-v-a58fdb3a"]]);export{Ze as default};
