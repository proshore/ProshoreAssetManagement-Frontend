import{B as g}from"./BaseInput.95439c49.js";import"./validateEmail.64dd81f6.js";import{T as v,v as _}from"./togglePassword.7e7e6613.js";import{A as b,_ as y,u as x,o as n,c as l,a as s,b as d,e as P,f as i,v as c,g as p,t as u,h as w,r as h}from"./index.2fdafcc0.js";import{B as S}from"./BaseAlert.f40146b2.js";const B="",k="api/users/register",C={EMAIL_URL:B,REGISTER_URL:k},R=async r=>await b.post(C.REGISTER_URL,r),V={data(){return{email:"",name:"",token:"",password:{value:"",error:"",seen:!1},cpassword:{value:"",error:"",seen:!1},submission:{message:"",isVerified:!1}}},components:{BaseInput:g,BaseAlert:S,TogglePassword:v},mounted(){this.email=this.$route.query.email,this.name=this.$route.query.name,this.token=this.$route.params.token},methods:{validateField(r){if(r==="password"){let e=_(this.password.value);this.password.error=e.errorMessage}r==="cpassword"&&(this.password.value!=this.cpassword.value?this.cpassword.error="Passwords should match":this.cpassword.error="")},toggleSeen(r){r=="cpassword"&&(this.cpassword.seen=!this.cpassword.seen),r=="password"&&(this.password.seen=!this.password.seen),console.log(this.password.seen)},async handleSubmit(){if(document.getElementById("registerBtn").disabled="true",this.validateField("cpassword"),!this.password.value&&!this.cpassword.value){this.submission.message="Password must be provided";return}if(this.password.value!=this.cpassword.value){this.validateField("cpassword"),this.submission.message="Passwords are not same";return}const r=x();if(!this.password.error&&!this.cpassword.error){try{const e=await R(this.formData());this.submission={message:"Registered Successfully",isVerified:!0},r.success("You have been registered in the Proshore Asset Management System"),this.$router.push({name:"login"})}catch(e){document.getElementById("registerBtn").disabled=!1,this.submission.message=e.response.data.message,r.error("Something went wrong")}return}else this.submission.message="The form is not filled properly"},formData(){return{name:this.name,email:this.email,password:this.password.value,password_confirmation:this.cpassword.value,token:this.token}}}},E={class:"container-fluid d-flex justify-content-center"},T={class:"row w-100 main-container p-3"},U=s("section",{class:"d-none d-lg-block col-lg-5 register-img"},null,-1),A={class:"col-12 col-lg-6 mx-xl-5 d-flex justify-content-center align-items-center"},I={class:"register-form-container"},F=s("div",{class:"register-head"},[s("h3",{class:"register-head-title"},"Register"),s("sub",{class:"register-head-subtitle"},"Set your password for the asset management account")],-1),M={class:"container-fluid mt-5"},D={class:"mb-4"},L=s("label",{for:"name",class:"form-label"},"Full Name:",-1),N={class:"mb-4"},j=s("label",{for:"email",class:"form-label"},"Email:",-1),q={class:"mb-4"},G=s("label",{for:"password",class:"form-label"},"Password:",-1),K={class:"password-field d-flex"},Y=["type"],z=["textContent"],H={class:"mb-4"},J=s("label",{for:"cpassword",class:"form-label"},"Confirm Password:",-1),O={class:"password-field d-flex"},Q=["type"],W=["textContent"],X=s("button",{class:"btn w-100 w-md-50 button-color",id:"registerBtn","data-cy":"register-btn",type:"submit"}," Register ",-1);function Z(r,e,$,ss,o,a){const f=h("BaseAlert"),m=h("TogglePassword");return n(),l("div",E,[s("div",T,[U,s("section",A,[s("div",I,[F,s("div",M,[d(f,{submission:o.submission},null,8,["submission"]),s("form",{onSubmit:e[8]||(e[8]=P((...t)=>a.handleSubmit&&a.handleSubmit(...t),["prevent"]))},[s("div",D,[L,i(s("input",{type:"text",class:"form-control",id:"name","onUpdate:modelValue":e[0]||(e[0]=t=>o.name=t),readonly:"","data-cy":"register-name"},null,512),[[c,o.name]])]),s("div",N,[j,i(s("input",{type:"email",class:"form-control",id:"email","onUpdate:modelValue":e[1]||(e[1]=t=>o.email=t),"data-cy":"register-email",readonly:""},null,512),[[c,o.email]])]),s("div",q,[G,s("div",K,[i(s("input",{class:"form-control",name:"password",type:[o.password.seen?"text":"password"],id:"password",label:"Password",placeholder:"Set Your Password","onUpdate:modelValue":e[2]||(e[2]=t=>o.password.value=t),onKeyup:e[3]||(e[3]=t=>a.validateField("password")),"data-cy":"register-password"},null,40,Y),[[p,o.password.value]]),d(m,{seen:o.password.seen,onClicked:e[4]||(e[4]=t=>a.toggleSeen("password"))},null,8,["seen"])]),o.password.error?(n(),l("div",{key:0,class:"form-text text-danger",textContent:u(o.password.error)},null,8,z)):w("",!0)]),s("div",H,[J,s("div",O,[i(s("input",{class:"form-control",name:"cpassword",type:[o.cpassword.seen?"text":"password"],id:"cpassword",label:"Confirm Password",placeholder:"Confirm Password","onUpdate:modelValue":e[5]||(e[5]=t=>o.cpassword.value=t),onKeyup:e[6]||(e[6]=t=>a.validateField("cpassword")),"data-cy":"register-cpassword"},null,40,Q),[[p,o.cpassword.value]]),d(m,{seen:o.cpassword.seen,onClicked:e[7]||(e[7]=t=>a.toggleSeen("cpassword"))},null,8,["seen"])]),o.cpassword.error?(n(),l("div",{key:0,class:"form-text text-danger",textContent:u(o.cpassword.error)},null,8,W)):w("",!0)]),X],32)])])])])])}const is=y(V,[["render",Z]]);export{is as default};
