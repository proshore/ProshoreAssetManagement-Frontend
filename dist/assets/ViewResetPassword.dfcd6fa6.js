import{B as f}from"./BaseInput.606e728c.js";import{T as v,v as _}from"./togglePassword.07e77e0b.js";import{A as g,_ as b,o as i,c as n,a as s,b as d,e as y,f as c,g as p,t as w,h as u,r as m}from"./index.26502714.js";import{B as P}from"./BaseAlert.078cf8ac.js";const x="api/users/reset-password",S={RESETPASSWORD_URL:x},k=async t=>await g.post(S.RESETPASSWORD_URL,t),C={data(){return{password:{value:"",error:"",seen:!1},cpassword:{value:"",error:"",seen:!1},submission:{message:"",isVerified:!1},token:"",email:""}},components:{BaseInput:f,BaseAlert:P,TogglePassword:v},mounted(){this.token=this.$route.query.token,this.email=this.$route.query.email},methods:{validateField(t){if(t==="password"){let e=_(this.password.value);this.password.error=e.errorMessage}t==="cpassword"&&(this.password.value!=this.cpassword.value?this.cpassword.error="Passwords should match":this.cpassword.error="")},toggleSeen(t){t==="cpassword"&&(this.cpassword.seen=!this.cpassword.seen),t==="password"&&(this.password.seen=!this.password.seen),console.log(this.password.seen)},async handleSubmit(){if(this.validateField("cpassword"),!this.password.value&&!this.cpassword.value){this.submission.message="Password must be provided";return}if(this.password.value!=this.cpassword.value){this.validateField("cpassword"),this.submission.message="Passwords do not match";return}if(!this.password.error&&!this.cpassword.error){try{const t=await k(this.formData());this.submission={message:"Password Changed Successfully",isVerified:!0},setTimeout(()=>this.$router.push({name:"login"}),2e3)}catch(t){this.submission.message=t}return}else this.submission.message="The form is not filled properly"},formData(){return{token:this.token,email:this.email,password:this.password.value,password_confirmation:this.cpassword.value}}}},B={class:"container-fluid d-flex justify-content-center"},R={class:"row w-100 main-container p-3"},T=s("section",{class:"d-none d-lg-block col-lg-5 register-img"},null,-1),V={class:"col-12 col-lg-6 mx-xl-5 d-flex justify-content-center align-items-center"},A={class:"register-form-container"},D=s("div",{class:"register-head"},[s("h3",{class:"register-head-title"},"Reset your Password"),s("sub",{class:"register-head-subtitle"},"Set your new password for the asset management account")],-1),E={class:"container-fluid mt-5"},F={class:"mb-4"},U=s("label",{for:"password",class:"form-label"},"Password:",-1),M={class:"password-field d-flex"},N=["type"],j=["textContent"],q={class:"mb-4"},I=s("label",{for:"cpassword",class:"form-label"},"Confirm Password:",-1),K={class:"password-field d-flex"},L=["type"],O=["textContent"],W=s("button",{class:"btn w-100 w-md-50 button-color","data-cy":"reset-btn",type:"submit"}," Submit ",-1);function Y(t,e,z,G,o,a){const h=m("BaseAlert"),l=m("TogglePassword");return i(),n("div",B,[s("div",R,[T,s("section",V,[s("div",A,[D,s("div",E,[d(h,{submission:o.submission},null,8,["submission"]),s("form",{onSubmit:e[6]||(e[6]=y((...r)=>a.handleSubmit&&a.handleSubmit(...r),["prevent"]))},[s("div",F,[U,s("div",M,[c(s("input",{class:"form-control",name:"password",type:[o.password.seen?"text":"password"],id:"password",label:"Password",placeholder:"Set Your Password","onUpdate:modelValue":e[0]||(e[0]=r=>o.password.value=r),onKeyup:e[1]||(e[1]=r=>a.validateField("password")),"data-cy":"reset-password"},null,40,N),[[p,o.password.value]]),d(l,{seen:o.password.seen,onClicked:e[2]||(e[2]=r=>a.toggleSeen("password"))},null,8,["seen"])]),o.password.error?(i(),n("div",{key:0,class:"form-text text-danger",textContent:w(o.password.error)},null,8,j)):u("",!0)]),s("div",q,[I,s("div",K,[c(s("input",{class:"form-control",name:"cpassword",type:[o.cpassword.seen?"text":"password"],id:"cpassword",label:"Confirm Password",placeholder:"Confirm Password","onUpdate:modelValue":e[3]||(e[3]=r=>o.cpassword.value=r),onKeyup:e[4]||(e[4]=r=>a.validateField("cpassword")),"data-cy":"reset-cpassword"},null,40,L),[[p,o.cpassword.value]]),d(l,{seen:o.cpassword.seen,onClicked:e[5]||(e[5]=r=>a.toggleSeen("cpassword"))},null,8,["seen"])]),o.cpassword.error?(i(),n("div",{key:0,class:"form-text text-danger",textContent:w(o.cpassword.error)},null,8,O)):u("",!0)]),W],32)])])])])])}const Z=b(C,[["render",Y]]);export{Z as default};
